- if @production.present?
  - if @production.id.present?
    - provide(:title, @production.title)
    .production-profile-details
      %h1
        = best_in_place @production, :title, as: :input
        - if policy(@production).edit?
          = link_to  production_step_path(production_id: @production.id, id: :production_data) do
            %i.fa.fa-cog{'aria-hidden': true}

      %figure.profile-image
        - if @production.key_image_id.present?
          = attachment_image_tag(@production, :key_image, :fit, 400, 1200, fallback: 'unknown.png')
        %figurecaption.social
          = render partial: 'shared/social_figure', locals: { target: @production }
      #user-stats
        %p.user-stat
          = @production.tagline if @production.tagline.present?
        %p.user-stat
          User Reviews:
          = @production.reviews.count
        %p.user-stat
          Followers:
          = @production.followers(User).count
        %p.user-stat
          Likes:
          = @production.likers(User).count
        %p.user-stat
          - if @production.company.present?
            Company:
            = link_to @production.company.name, @production.company
        %p.user-stat
          %p
            - key_cast = @production.key_credits.select { |c| c.credit_type == 'creative' }
            - key_cast.each do |c|
              = succeed ',' do
                = c.artist.name
                \-
                = c.position
        %p.user-stat
          Starring:
          %p
            - key_cast = @production.key_credits.select { |c| c.credit_type == 'production' }
            - key_cast.each do |c|
              = succeed ',' do
                = c.artist.name
                \-
                = c.position
        - if @production.venues.present?
          %p.venue-info
            - v = @production.venues.first
            = link_to v.name, v
            %br
            = @production.theaters.first.name
            %br
            #{v.address}, #{v.city}, #{v.state} #{v.zip}
            %br
            = link_to v.website, v.website if v.website.present?

        %p.user-stat
          = truncate(@production.description, length: 200)
        %ul
          - if policy(@production).claim?
            %li
              = link_to 'Claim Production Page', production_claim_path(@production), method: :patch
